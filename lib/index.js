"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var React=_interopDefault(require("react"));function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(t){_defineProperty(e,t,a[t])})}return e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _isExist(){for(var t=arguments,e=0;e<t.length;e++){var a=t[e];if(""===a||null==a)return!1}return!0}function _isSetLineDash(t,e){Array.isArray(t)&&2===t.length&&"function"==typeof e&&e(t)}function _deepCopy(t){var e=isType(t);return"Array"===e||"Object"===e?cloneObj(t):"Date"===e?t.constructor(t):t}function cloneObj(t){var e=t instanceof Array?[]:{};for(var a in t)e[a]="object"===_typeof(t[a])?cloneObj(t[a]):t[a];return e}function isType(t){return/\[object\s(.*?)\]/.exec(Object.prototype.toString.call(t))[1]}function _getRate(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return _isExist(t,e)&&0<=t&&0<e?t/e:0}function _getMax(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"key",n=[];return t.map(function(t,e){isNaN(t[a])||n.push(t[a])}),0<n.length?Math.max.apply(null,n):0}function _reduceAngle(t){for(;t>=2*Math.PI;)t-=2*Math.PI;for(;t<0;)t+=2*Math.PI;return t}function _getCtx(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"2d";return _isExist(t)&&this.refs[t]&&this.refs[t].getContext(e)}function DrawCartCoor(){var L=[0,0],R=[100,100];function j(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:L,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:R,a=t[0]!==e[0]&&t[1]===e[1],n=t[0]===e[0]&&t[1]!==e[1];return{drawX:a,drawY:n,flag:a||n}}this._drawCoor=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=t.show,n=t.begin,i=void 0===n?L:n,r=t.end,o=void 0===r?R:r,l=t.strokeStyle,s=void 0===l?"#000":l,d=t.lineWidth,h=void 0===d?2:d,c=t.lineCap,u=void 0===c?"round":c,f=t.setLineDash,p=j(i,o).flag;a&&p&&(e.save(),e.beginPath(),_isSetLineDash(f,function(t){e.setLineDash(t)}),e.moveTo.apply(e,i),e.lineTo.apply(e,o),e.strokeStyle=s,e.lineWidth=h,e.lineCap=u,e.stroke(),e.restore())},this._drawScale=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.begin,n=void 0===a?L:a,i=e.end,r=void 0===i?R:i,o=e.strokeStyle,l=void 0===o?"#000":o,s=e.scaleNum,d=void 0===s?5:s,h=e.scaleLength,c=void 0===h?0:h,u=e.lineWidth,f=void 0===u?2:u,p=e.startIndex,y=void 0===p?0:p,v=e.endIndex,g=void 0===v?d:v,_=j(n,r),b=_.drawX,w=_.drawY;if(_.flag&&0<d){var k,m,C,D,S=(r[0]-n[0])/(d-1),P=(r[1]-n[1])/(d-1);t.save();for(var x=y;x<g;x++)C=(k=n[0]+S*x)+(w?c:0),D=(m=n[1]+P*x)+(b?c:0),t.beginPath(),t.moveTo(k,m),t.lineTo(C,D),t.lineWidth=f,t.strokeStyle=l,t.stroke();t.restore()}},this._drawGrid=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=t.begin,n=void 0===a?L:a,i=t.end,r=void 0===i?R:i,o=t.show,l=t.gridNum,s=void 0===l?5:l,d=t.strokeStyle,h=void 0===d?"#000":d,c=t.lineWidth,u=void 0===c?1:c,f=t.setLineDash,p=void 0===f?[4,4]:f,y=t.gridLength,v=j(n,r),g=v.drawX,_=v.drawY,b=v.flag;if(o&&b&&0<s){var w,k,m,C,D=(r[0]-n[0])/(s-1),S=(r[1]-n[1])/(s-1);e.save();for(var P=1;P<s;P++)m=(w=n[0]+D*P)+(_?y:0),C=(k=n[1]+S*P)+(g?y:0),e.beginPath(),_isSetLineDash(p,function(t){e.setLineDash(t)}),e.moveTo(w,k),e.lineTo(m,C),e.lineWidth=u,e.strokeStyle=h,e.stroke();e.restore()}},this._drawLabel=function(t){var e,a,n,i,r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=o.key,s=(o.label,o.labelNum),d=void 0===s?2:s,h=o.begin,c=void 0===h?L:h,u=o.end,f=void 0===u?R:u,p=o.data,y=void 0===p?[]:p,v=j(c,f),g=v.drawX,_=v.drawY,b=y.length;if(t.save(),g){e=(f[0]-c[0])/(b-1),a=(f[1]-c[1])/(b-1);for(var w=0;w<b;w++)n=c[0]+e*w,i=c[1]+a*w,r=y[w][l],t.textAlign="center",t.textBaseline="top",t.fillText(isNaN(r)?r:Math.round(r),n,i+5)}else if(_){for(var k,m,C=0,D=0;D<l.length;D++)C=Math.max(C,_getMax(y,l[D]));k=C/(d-1),e=(f[0]-c[0])/(d-1),m=(f[1]-c[1])/(d-1);for(var S=r=0;S<d;S++)n=c[0]+e*S,i=c[1]+m*S,t.textAlign="end",t.textBaseline="middle",t.fillText(isNaN(r)?r:Math.round(r),n-5,i),r+=k}else t.restore()},this._drawDataBlock=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=t.rectWidth,n=(t.rectHeight,t.lineWidth),i=t.setLineDash,r=t.lineHeight,o=t.fillStyle,l=t.xCoor,s=t.yCoor,d=t.data,h=void 0===d?[]:d,c=t.scale,u=t.xKey,f=t.yKey,p=t.yLabel,y=t.fontColor,v=h.length,g=(l.end[0]-l.begin[0])/(v-1);e.save();for(var _=0;_<h.length;_++){var b=l.begin[0]+g*_;if(Math.abs(c[0]-b)<Math.abs(g)/2){e.save(),e.beginPath(),_isSetLineDash(i,function(t){e.setLineDash(t)}),e.moveTo(b,l.begin[1]),e.lineTo(b,s.end[1]),e.lineWidth=n,e.strokeStyle="#000",e.stroke(),e.restore();var w=b+5,k=c[1],m=k,C=0;for(var D in _>=h.length/2&&(w=b-a-5),h[_])C+=r;for(var S in e.beginPath(),e.fillStyle=o,e.fillRect(w,k,a,C),e.textBaseline="top",h[_])u===S&&(e.strokeText("".concat(h[_][S]),w+5,m),e.stroke()),-1<f.indexOf(S)&&(e.strokeStyle=y[f.indexOf(S)%y.length],e.strokeText("".concat(p[f.indexOf(S)]||S,"：").concat(h[_][S]),w+5,m),e.stroke()),m+=r;break}}e.restore()}}function DrawPolarCoor(){this._setCenter=function(t,e){t.translate.apply(t,e)},this._drawCenterDot=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.radius,n=void 0===a?3:a,i=e.fill,r=e.stroke,o=e.fillStyle,l=e.strokeStyle,s=e.lineWidth;t.save(),t.beginPath(),t.arc(0,0,n,0,2*Math.PI),i&&(t.fillStyle=o,t.fill()),r&&(t.lineWidth=s,t.strokeStyle=l,t.stroke()),t.closePath(),t.restore()},this._drawLabel=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.fillStyle,n=e.textGap,i=e.font,r=e.radius,o=e.label,l=e.rad,s=Math.round(r*Math.sin(l)),d=-Math.round(r*Math.cos(l));0<s?s+=n:s<0&&(s-=n),0<d?d+=n:d<0&&(d-=n),t.font=i,t.textAlign="center",t.textBaseline="middle",t.fillStyle=a,t.fillText(o,s,d)},this._drawDataBlock=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.data,e.radius,e.scale}}var DrawLine=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,DrawCartCoor),_createClass(e,[{key:"_drawLineCoor",value:function(){this._drawCoor.apply(this,arguments)}},{key:"_drawLineScale",value:function(){this._drawScale.apply(this,arguments)}},{key:"_drawLineGrid",value:function(){this._drawGrid.apply(this,arguments)}},{key:"_drawLineLabel",value:function(){this._drawLabel.apply(this,arguments)}},{key:"_drawLineDataBlock",value:function(){this._drawDataBlock.apply(this,arguments)}},{key:"_drawLineData",value:function(r){for(var o,l,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.data,a=void 0===e?[]:e,n=t.key,i=void 0===n?[]:n,s=t.xCoor,d=t.yCoor,h=t.strokeStyle,c=void 0===h?[]:h,u=t.lineWidth,f=void 0===u?3:u,p=t.line,y=void 0===p||p,v=t.dot,g=void 0===v||v,_=t.dotRadius,b=void 0===_?4:_,w=(s.end[0]-s.begin[0])/(a.length-1),k=d.end[1]-d.begin[1],m=0,C=0;C<i.length;C++)m=Math.max(m,_getMax(a,i[C]));y&&i.map(function(n,t){r.beginPath(),a.map(function(t,e){if(0<=t[n]){var a=t[n];o=s.begin[0]+w*e,l=_getRate(a,m)*k+d.begin[1],0===e&&r.moveTo(o,l),0<e&&r.lineTo(o,l)}}),r.strokeStyle=c[t%c.length],r.lineWidth=f,r.stroke()}),g&&i.map(function(n,i){a.map(function(t,e){if(0<=t[n]){var a=t[n];o=s.begin[0]+w*e,l=_getRate(a,m)*k+d.begin[1],r.beginPath(),r.arc(o,l,b,0,2*Math.PI),r.fillStyle=c[i%c.length],r.fill()}})})}}]),e}(),DrawRadar=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,DrawPolarCoor),_createClass(e,[{key:"_getDataDotPos",value:function(t,a){var n,i,e=t.data,r=t.length,o=2*Math.PI/e.length;e.map(function(t,e){n=r*Math.sin(o*e),i=-r*Math.cos(o*e),"function"==typeof a&&a([n,i],t,e)})}},{key:"_setRadarCenter",value:function(){this._setCenter.apply(this,arguments)}},{key:"_drawRadarCenterDot",value:function(){this._drawCenterDot.apply(this,arguments)}},{key:"_drawRadarLabel",value:function(a){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=i.labelKey,t=i.data,o=i.fillStyle,l=2*Math.PI/t.length;a.save(),t.map(function(t,e){n._drawLabel(a,_objectSpread({},i,{label:t[r]||"",rad:l*e,fillStyle:o[e%o.length]}))}),a.restore()}},{key:"_drawRadarScale",value:function(n){for(var t,i,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.lineWidth,r=e.strokeStyle,o=e.scaleNum,l=e.setLineDash,s=e.data,d=e.radius,h=e.dataKey,c=isNaN(d/o)?20:d/o,u=0,f=0;f<h.length;f++)u=Math.max(u,_getMax(s,h[f]));n.save();for(var p=0;p<o;p++)t=c*(p+1),i=Math.round(u/o*(p+1)),n.beginPath(),this._getDataDotPos({data:s,length:t},function(t,e,a){0===a&&n.moveTo.apply(n,t),0===a&&n.fillText.apply(n,[i].concat(_toConsumableArray(t))),0<a&&n.lineTo.apply(n,t)}),n.lineWidth=a,n.strokeStyle=r,_isSetLineDash(l,function(t){n.setLineDash(t)}),n.closePath(),n.stroke();n.restore()}},{key:"_drawRadarGuide",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=t.show,n=t.setLineDash,i=t.lineWidth,r=t.strokeStyle,o=t.data,l=t.radius;e.save(),e.beginPath(),a&&this._getDataDotPos({data:o,length:l},function(t){e.moveTo(0,0),e.lineTo.apply(e,t),e.lineWidth=i,e.strokeStyle=r,_isSetLineDash(n,function(t){e.setLineDash(t)}),e.stroke()}),e.restore()}},{key:"_drawRadarData",value:function(l){for(var t=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.stroke,n=e.fill,s=e.strokeStyle,d=e.fillStyle,h=e.setLineDash,c=e.lineWidth,i=e.dataKey,u=e.data,f=e.radius,p=0,r=0;r<i.length;r++)p=Math.max(p,_getMax(u,i[r]));l.save(),i.map(function(r,o){l.beginPath(),t._getDataDotPos({data:u,length:f},function(t,e,a){var n=_getRate(e[r],p),i=t.map(function(t){return t*n});0===a&&l.moveTo.apply(l,i),0<a&&l.lineTo.apply(l,i),l.lineWidth=c,_isSetLineDash(h,function(t){l.setLineDash(t)}),l.strokeStyle=s[o%s.length],l.fillStyle=d[o%d.length]}),l.closePath(),a&&l.stroke(),n&&l.fill()}),l.restore()}}]),e}(),DrawDashBoard=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,DrawPolarCoor),_createClass(e,[{key:"_getUseRad",value:function(t,e,a){var n=0;switch(t=_reduceAngle(t),e=_reduceAngle(e),a){case!0:n=e-t;break;case!1:n=2*Math.PI-t+e}return n}},{key:"_setDashBoardCenter",value:function(){this._setCenter.apply(this,arguments)}},{key:"_drawDashBoardBack",value:function(t,e){var a=e.outRadius,n=void 0===a?120:a,i=e.innerRadius,r=void 0===i?100:i,o=e.invalidAreaBg,l=void 0===o?"#ddd":o,s=e.startAngle,d=e.endAngle,h=e.direction;s=_reduceAngle(s),d=_reduceAngle(d),t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(n*Math.cos(d),n*Math.sin(d)),t.moveTo(0,0),t.lineTo(n*Math.cos(s),n*Math.sin(s)),t.arc(0,0,n,s,d,h),t.fillStyle=l,t.fill(),t.beginPath(),t.moveTo(0,0),t.lineTo(r*Math.cos(d),r*Math.sin(d)),t.moveTo(0,0),t.lineTo(r*Math.cos(s),r*Math.sin(s)),t.arc(0,0,r,s,d,h),t.strokeStyle="#fff",t.fillStyle="#fff",t.stroke(),t.fill(),t.restore()}},{key:"_drawDashBoardCenterDot",value:function(){this._drawCenterDot.apply(this,arguments)}},{key:"_drawDashBoardScale",value:function(t,e){for(var a=e.innerRadius,n=e.startAngle,i=e.endAngle,r=e.direction,o=e.gap,l=e.num,s=e.max,d=e.font,h=this._getUseRad(n,i,r),c=0;c<l+1;c++)t.textAlign="center",t.textBaseline="middle",t.font=d,t.fillText(Math.round(c*s/l),(a-o)*Math.cos(n+c*h/l),(a-o)*Math.sin(n+c*h/l))}},{key:"_drawDashBoardDataLine",value:function(t,e){var a=e.startAngle,n=e.endAngle,i=e.direction,r=e.strokeStyle,o=e.length,l=e.lineWidth,s=e.dataNum,d=e.max;if(d<s)throw new Error("dataNum more than max is not allowed");var h=this._getUseRad(a,n,i),c=o*Math.cos(s/d*h+a),u=o*Math.sin(s/d*h+a);t.beginPath(),t.moveTo(0,0),t.lineTo(c,u),t.lineWidth=l,t.lineCap="round",t.strokeStyle=r,t.stroke()}}]),e}();function _drawLine(){return new DrawLine}function _drawRadar(){return new DrawRadar}function _drawDashBoard(){return new DrawDashBoard}function styleInject(t,e){void 0===e&&(e={});var a=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===a&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var css=".radar_all {\n  position: relative;\n}\n.radar_canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  border: 1px solid #000;\n}\n.radar_tooltip {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n}\n.radar_tooltip > div {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  font-size: 14px;\n  cursor: pointer;\n}\n.radar_tooltip > div:not(last-child) {\n  margin-right: 10px;\n}\n";styleInject(css);var obj=_drawRadar(),_setRadarCenter=obj._setRadarCenter.bind(obj),_drawRadarCenterDot=obj._drawRadarCenterDot.bind(obj),_drawRadarScale=obj._drawRadarScale.bind(obj),_drawRadarLabel=obj._drawRadarLabel.bind(obj),_drawRadarGuide=obj._drawRadarGuide.bind(obj),_drawRadarData=obj._drawRadarData.bind(obj),Radar=function(t){function a(t){var e;return _classCallCheck(this,a),(e=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,t))).state={canvasId:["back"],lengthLimit:3,tooltipPro:{},center:[],props:{},formatData:[]},e}return _inherits(a,React.Component),_createClass(a,[{key:"componentDidMount",value:function(){var t=this;this.setState({props:this.props,formatData:_deepCopy(this.props.data)},function(){return t.init()})}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.setState({props:t,formatData:_deepCopy(t.data)},function(){return e.init()})}},{key:"init",value:function(t){var e=this,a=this.state.canvasId,n=this.state.props,i=n.width,r=n.height,o=_getCtx.call(this,a[0]),l=[Math.round(i/2),Math.round(r/2)];this.setState({center:l},function(){e.drawRadar(o,t),e.drawTooltip(o)})}},{key:"drawRadar",value:function(t){var e=this.state,a=e.lengthLimit,n=e.center,i=e.formatData,r=this.state.props,o=r.width,l=r.height,s=r.radius,d=r.centerDot,h=r.scale,c=r.label,u=r.guide,f=r.dataRender;t.clearRect(0,0,o,l),i&&i.length>=a&&(_setRadarCenter(t,n),_drawRadarGuide(t,_objectSpread({},u,{data:i,radius:s})),_drawRadarScale(t,_objectSpread({},h,{data:i,radius:s,dataKey:f.dataKey})),_drawRadarLabel(t,_objectSpread({},c,{data:i,radius:s})),_drawRadarCenterDot(t,_objectSpread({},d)),_drawRadarData(t,_objectSpread({},f,{data:i,radius:s})),_setRadarCenter(t,n=[-n[0],-n[1]]))}},{key:"drawTooltip",value:function(t){var a=this,e=this.state.tooltipPro,n=this.state.props,i=n.width,r=n.tooltip,o=n.dataRender,l=r.position,s=r.childLineHeight,d=r.childLineWidth,h=r.height,c=r.disabledColor,u=o.stroke,f=o.fill,p=o.strokeStyle,y=o.fillStyle,v=o.dataKey,g=o.dataLabel;if(!e.key||0===e.key.length){e.key=[];for(var _=0;_<v.length;_++)e.key.push({show:!0,key:v[_],label:g[_]||v[_]})}var b={width:i,height:h};b[l]=0,e.node=React.createElement("div",{className:"radar_tooltip",style:b},e.key.map(function(t,e){return React.createElement("div",{key:t.key,onClick:function(){return a.changeData(t.key)}},React.createElement("div",{style:{height:s,width:d,marginRight:5,background:t.show&&f?y[e%y.length]:c,border:t.show&&u?"1px solid ".concat(p[e%p.length]):c}}),React.createElement("div",{style:{color:t.show?"#000":c}},t.label))})),this.setState({tooltipPro:e})}},{key:"changeData",value:function(t){for(var e=this,a=this.state,n=a.tooltipPro,i=a.formatData,r=this.state.props.data,o=0;o<i.length;o++)_isExist(i[o][t])?delete i[o][t]:i[o][t]=r[o][t];for(var l=0;l<n.key.length;l++)t===n.key[l].key&&(n.key[l].show=!n.key[l].show);this.setState({formatData:i,tooltipPro:n},function(){return e.init()})}},{key:"render",value:function(){var t=this.state,e=t.canvasId,a=t.tooltipPro,n=this.state.props,i=n.width,r=n.height;return React.createElement("div",{className:"radar_all",style:{width:i,height:r}},e&&e.map(function(t,e){return React.createElement("canvas",{key:t,ref:t,width:i,height:r,className:"radar_canvas"})}),a.node)}}]),a}();Radar.defaultProps={width:450,height:450,radius:150,centerDot:{radius:5,fill:!0,fillStyle:"#5d9",stroke:!1,strokeStyle:"#5d9cec"},scale:{lineWidth:5,strokeStyle:"#5d9",scaleNum:3},guide:{show:!0,setLineDash:[4,4],lineWidth:2,strokeStyle:"#ddd"},label:{labelKey:"label",fillStyle:["red","green","blue"],textGap:20,font:"16px Arial"},dataRender:{stroke:!0,fill:!0,fillStyle:["rgba(85,221,153,.5)","rgba(93,156,236,.5)","rgba(255,0,0,.5)"],lineWidth:2,dataKey:["A","B","C"],dataLabel:["stuA","stuB","stuC"]},tooltip:{position:"bottom",childLineHeight:5,childLineWidth:40,height:60,disabledColor:"#ddd"},data:[{label:"语文",A:120,B:90,C:130},{label:"数学",A:140,B:150,C:130},{label:"英语",A:130,B:90,C:130},{label:"历史",A:90,B:80,C:100},{label:"政治",A:95,B:60,C:100},{label:"地理",A:80,B:75,C:100},{label:"历史",A:90,B:80,C:100},{label:"政治",A:95,B:60,C:100},{label:"地理",A:80,B:75,C:100}]};var css$1=".line_all {\n  position: relative;\n}\n.line_canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  border: 1px solid #000;\n}\n.line_title,\n.line_tooltip {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n}\n.line_title > div,\n.line_tooltip > div {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  font-size: 14px;\n  cursor: pointer;\n}\n.line_title > div:not(last-child),\n.line_tooltip > div:not(last-child) {\n  margin-right: 10px;\n}\n";styleInject(css$1);var obj$1=_drawLine(),_drawLineCoor=obj$1._drawLineCoor.bind(obj$1),_drawLineScale=obj$1._drawLineScale.bind(obj$1),_drawLineGrid=obj$1._drawLineGrid.bind(obj$1),_drawLineLabel=obj$1._drawLineLabel.bind(obj$1),_drawLineData=obj$1._drawLineData.bind(obj$1),_drawLineDataBlock=obj$1._drawLineDataBlock.bind(obj$1),Line=function(t){function a(t){var e;return _classCallCheck(this,a),(e=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,t))).state={canvasId:["back","data","block"],titleDOM:void 0,tooltipPro:{},xCoor:{},yCoor:{},props:{},formatData:[]},e.drawBlock=e.drawBlock.bind(_assertThisInitialized(e)),e}return _inherits(a,React.Component),_createClass(a,[{key:"getPosition",value:function(){var t=this.state.props.innerGap;return{top:t[0],right:t[1],bottom:t[2],left:t[3]}}},{key:"componentDidMount",value:function(){var t=this;this.setState({props:this.props,formatData:_deepCopy(this.props.data)},function(){return t.init()})}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.setState({props:t,formatData:_deepCopy(t.data)},function(){return e.init()})}},{key:"init",value:function(){var t=this,e=this.state.canvasId,a=this.state.props,n=a.width,i=a.height,r=this.getPosition(),o=r.top,l=r.right,s=r.bottom,d=r.left,h=_getCtx.call(this,e[0]),c=_getCtx.call(this,e[1]);this.refs[e[2]].addEventListener("mousemove",this.drawBlock),this.setState({xCoor:{begin:[d,i-s],end:[n-l,i-s]},yCoor:{begin:[d,i-s],end:[d,o]}},function(){t.drawBack(h),t.drawData(c),t.drawTitle(),t.drawTooltip()})}},{key:"drawBack",value:function(t){var e=this.state,a=e.xCoor,n=e.yCoor,i=e.formatData,r=this.state.props,o=r.width,l=r.height,s=r.axisX,d=r.axisY,h=r.scaleX,c=r.scaleY,u=r.gridX,f=r.gridY,p=r.labelX,y=r.labelY;r.dataLine;t.clearRect(0,0,o,l),_drawLineCoor(t,_objectSpread({},s,a)),_drawLineCoor(t,_objectSpread({},d,n)),_drawLineScale(t,_objectSpread({},s,a,h,{scaleNum:i.length})),_drawLineScale(t,_objectSpread({},d,n,c)),_drawLineGrid(t,_objectSpread({},s,a,u,{gridNum:i.length,gridLength:n.end[1]-n.begin[1]})),_drawLineGrid(t,_objectSpread({},d,n,f,{gridLength:a.end[0]-a.begin[0]})),_drawLineLabel(t,_objectSpread({},p,a,{data:i})),_drawLineLabel(t,_objectSpread({},y,n,{data:i}))}},{key:"drawData",value:function(t){var e=this.state,a=e.xCoor,n=e.yCoor,i=e.formatData,r=this.state.props,o=r.width,l=r.height,s=r.labelY,d=r.dataLine;r.data;t.clearRect(0,0,o,l),_drawLineData(t,_objectSpread({key:s.key,data:i,xCoor:a,yCoor:n},d))}},{key:"drawBlock",value:function(t){var e=this.getPosition(),a=e.top,n=e.right,i=e.bottom,r=e.left,o=this.state.props,l=o.width,s=o.height,d=o.labelX,h=o.labelY,c=o.dataLine,u=o.dataBlock,f=this.state,p=f.canvasId,y=f.xCoor,v=f.yCoor,g=f.formatData,_=_getCtx.call(this,p[2]),b=t.offsetX>=r&&t.offsetX<=l-n&&t.offsetY>=a&&t.offsetY<=s-i;_.clearRect(0,0,l,l),b?_drawLineDataBlock(_,_objectSpread({},u,{xCoor:y,yCoor:v,data:g,scale:[t.offsetX,t.offsetY],xKey:d.key,yKey:Array.isArray(h.key)&&h.key||[],yLabel:Array.isArray(h.label)&&h.label||[],fontColor:c.strokeStyle})):_.clearRect(0,0,l,s)}},{key:"drawTitle",value:function(){var t=this.state.props,e=t.width,a=t.title,n=a.position,i=a.label,r=a.style,o=void 0===r?{}:r;(o=_objectSpread({},o,{width:e}))[n]=0,this.setState({titleDOM:React.createElement("div",{className:"line_title",style:o},i)})}},{key:"drawTooltip",value:function(){var a=this,t=this.state.tooltipPro,e=this.state.props,n=e.width,i=e.tooltip,r=e.labelY,o=e.dataLine,l=i.position,s=i.childLineHeight,d=i.childLineWidth,h=i.height,c=i.disabledColor,u=r.key,f=r.label;if(!t.key||0===t.key.length){t.key=[];for(var p=0;p<u.length;p++)t.key.push({key:u[p],show:!0,label:f[p]||u[p]})}var y={width:n,height:h};y[l]=0,t.node=React.createElement("div",{className:"line_tooltip",style:y},t.key.map(function(t,e){return React.createElement("div",{key:t.key,onClick:function(){return a.changeData(t.key)}},React.createElement("div",{style:{height:s,width:d,marginRight:5,background:t.show?o.strokeStyle[e%o.strokeStyle.length]:c}}),React.createElement("div",{style:{color:t.show?"#000":c}},t.label))})),this.setState({tooltipPro:t})}},{key:"changeData",value:function(t){for(var e=this,a=this.state,n=a.tooltipPro,i=a.formatData,r=this.state.props.data,o=0;o<i.length;o++)_isExist(i[o][t])?delete i[o][t]:i[o][t]=r[o][t];for(var l=0;l<n.key.length;l++)t===n.key[l].key&&(n.key[l].show=!n.key[l].show);this.setState({formatData:i,tooltipPro:n},function(){return e.init()})}},{key:"render",value:function(){var t=this.state,e=t.canvasId,a=t.titleDOM,n=t.tooltipPro,i=(t.mouseEvent,this.state.props),r=i.width,o=i.height;i.coordinate;return React.createElement("div",{className:"line_all",style:{width:r,height:o}},e&&e.map(function(t,e){return React.createElement("canvas",{key:t,ref:t,width:r,height:o,className:"line_canvas"})}),a,n.node)}}]),a}();Line.defaultProps={width:1e3,height:500,innerGap:[60,40,70,40],axisX:{show:!0,strokeStyle:"#5d9cec",lineWidth:2,setLineDash:[]},axisY:{show:!0,strokeStyle:"#5d9cec",lineWidth:2,setLineDash:[]},scaleX:{scaleLength:0,strokeStyle:"#5d9",lineWidth:2},scaleY:{scaleNum:0,scaleLength:10,lineWidth:2},gridX:{show:!1,strokeStyle:"#000",lineWidth:1,setLineDash:[4,4]},gridY:{show:!0,gridNum:5,strokeStyle:"#000",lineWidth:1,setLineDash:[4,4]},labelX:{key:"x",label:"日期"},labelY:{key:["weight","IQ","EQ","NQ"],label:["体重","智商","情商","智障"],labelNum:5},dataLine:{strokeStyle:["red","green","blue","violet"],lineWidth:3,line:!0,dot:!0,dotRadius:4},tooltip:{position:"bottom",childLineHeight:5,childLineWidth:40,height:60,disabledColor:"#ddd"},title:{position:"top",label:"人体状况图（α测试）",style:{fontSize:16,color:"#000",height:60}},dataBlock:{rectWidth:100,lineWidth:1,setLineDash:[4,4],lineHeight:20,fillStyle:"rgba(93,156,236,.3)"},data:[{x:"2012-12-12",weight:200,IQ:300,EQ:138,NQ:100},{x:"2012-12-13",weight:100,IQ:200,EQ:500,NQ:150},{x:"2012-12-14",weight:200,IQ:100,EQ:172,NQ:89},{x:"2012-12-15",weight:150,IQ:0,EQ:146,NQ:200},{x:"2012-12-16",weight:200,IQ:100,EQ:250,NQ:165},{x:"2012-12-17",weight:100,IQ:200,EQ:125,NQ:138},{x:"2012-12-18",weight:200,IQ:300,EQ:250,NQ:50}]};var css$2=".dashboard_all {\n  position: relative;\n}\n.dashboard_canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  border: 1px solid #000;\n}\n";styleInject(css$2);var obj$2=_drawDashBoard(),_setDashBoardCenter=obj$2._setDashBoardCenter.bind(obj$2),_drawDashBoardBack=obj$2._drawDashBoardBack.bind(obj$2),_drawDashBoardCenterDot=obj$2._drawDashBoardCenterDot.bind(obj$2),_drawDashBoardScale=obj$2._drawDashBoardScale.bind(obj$2),_drawDashBoardDataLine=obj$2._drawDashBoardDataLine.bind(obj$2),DashBoard=function(t){function a(t){var e;return _classCallCheck(this,a),(e=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,t))).state={canvasId:["back","data"],props:{},center:[]},e}return _inherits(a,React.Component),_createClass(a,[{key:"componentDidMount",value:function(){var t=this;this.setState({props:this.props},function(){return t.init()})}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.setState({props:t},function(){return e.init()})}},{key:"init",value:function(){var t=this,e=this.state.canvasId,a=this.state.props,n=a.width,i=a.height,r=_getCtx.call(this,e[0]),o=_getCtx.call(this,e[1]),l=[Math.round(n/2),Math.round(i/2)];this.setState({center:l},function(){t.drawBack(r),t.drawData(o)})}},{key:"drawBack",value:function(t){var e=this.state.center,a=this.state.props,n=a.width,i=a.height,r=a.innerRadius,o=a.outRadius,l=a.startAngle,s=a.endAngle,d=a.direction,h=a.invalidAreaBg,c=a.scale;t.clearRect(0,0,n,i),_setDashBoardCenter(t,e),_drawDashBoardBack(t,{outRadius:o,innerRadius:r,invalidAreaBg:h,startAngle:l,endAngle:s,direction:d}),_drawDashBoardScale(t,_objectSpread({innerRadius:r,startAngle:l,endAngle:s,direction:d},c)),_setDashBoardCenter(t,[-e[0],-e[1]])}},{key:"drawData",value:function(t){var e=this.state.center,a=this.state.props,n=a.width,i=a.height,r=a.startAngle,o=a.endAngle,l=a.direction,s=a.centerDot,d=a.scale,h=a.pointer,c=a.dataNum;t.clearRect(0,0,n,i),_setDashBoardCenter(t,e),_drawDashBoardDataLine(t,_objectSpread({startAngle:r,endAngle:o,direction:l},h,{dataNum:c,max:d.max})),_drawDashBoardCenterDot(t,s),_setDashBoardCenter(t,[-e[0],-e[1]])}},{key:"render",value:function(){var t=this.state.canvasId,e=this.state.props,a=e.width,n=e.height;e.coordinate;return React.createElement("div",{className:"dashboard_all",style:{width:a,height:n}},t&&t.map(function(t,e){return React.createElement("canvas",{key:t,ref:t,width:a,height:n,className:"dashboard_canvas"})}))}}]),a}();DashBoard.defaultProps={width:450,height:450,innerRadius:110,outRadius:120,startAngle:10/12*Math.PI,endAngle:2/12*Math.PI,direction:!1,invalidAreaBg:"#5d9cec",centerDot:{radius:5,stroke:!1,fill:!0,strokeStyle:"#5d9",fillStyle:"#5d9",lineWidth:3},scale:{gap:15,num:8,max:30,font:"12px Arail"},pointer:{length:70,strokeStyle:"pink",lineWidth:4},dataNum:5};var css$3=".clock_all {\n  position: relative;\n}\n.clock_canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n";styleInject(css$3);var Clock=function(t){function a(t){var e;return _classCallCheck(this,a),(e=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,t))).state={canvasId:["back","pointer"],hourNums:[3,4,5,6,7,8,9,10,11,12,1,2],center:[],props:{}},e}return _inherits(a,React.Component),_createClass(a,[{key:"componentWillReceiveProps",value:function(t){var e=this;this.setState({props:t},function(){return e.init()})}},{key:"componentDidMount",value:function(){var t=this;this.setState({props:this.props},function(){return t.init()})}},{key:"init",value:function(){var t=this,e=this.state.canvasId,a=this.state.props,n=a.width,i=a.height,r=_getCtx.call(this,e[0]),o=_getCtx.call(this,e[1]),l=[Math.round(n/2),Math.round(i/2)];this.setState({center:l},function(){r.translate(l[0],l[1]),o.translate(l[0],l[1]),t.drawClockBack(r),t.drawClockScale(r),t.drawClockNum(r),t.drawClockPointer(o)})}},{key:"drawClockBack",value:function(t){var e=this.state.props,a=(e.width,e.height,e.radius),n=e.clockWidth;t.save(),t.beginPath(),t.lineWidth=n,t.arc(0,0,a,0,2*Math.PI,!1),t.stroke(),t.restore()}},{key:"drawClockScale",value:function(t){t.save();for(var e=this.state.props,a=e.radius,n=e.scaleGap,i=0;i<60;i++){var r=2*Math.PI/60*i,o=Math.cos(r)*(a-n),l=Math.sin(r)*(a-n);t.beginPath(),t.fillStyle=i%5==0?"#000":"#ccc",t.arc(o,l,2,0,2*Math.PI,!1),t.fill()}t.restore()}},{key:"drawClockNum",value:function(r){var t=this.state.hourNums,e=this.state.props,o=e.radius,l=e.numberGap;r.save(),r.font="18px Arial",r.textAlign="center",r.textBaseline="middle",t.map(function(t,e){var a=2*Math.PI/12*e,n=Math.cos(a)*(o-l),i=Math.sin(a)*(o-l);r.fillText(t,n,i)}),r.restore()}},{key:"drawClockPointer",value:function(t){var e=this,a=this.state.center,n=this.state.props,i=n.width,r=n.height;t.clearRect(-a[0],-a[1],i,r),this.drawHour(t),this.drawMinute(t),this.drawSecond(t),this.drawCenterDot(t);var o=setTimeout(function(){e.drawClockPointer(t),clearTimeout(o)},1e3)}},{key:"drawHour",value:function(t){var e=this.state.props.hourPointer,a=2*Math.PI/12*(new Date).getHours(),n=2*Math.PI/12/60*(new Date).getMinutes();this.drawPointer(t,_objectSpread({rad:a+n},e))}},{key:"drawMinute",value:function(t){var e=this.state.props.minutePointer,a=2*Math.PI/60*(new Date).getMinutes();this.drawPointer(t,_objectSpread({rad:a},e))}},{key:"drawSecond",value:function(t){var e=this.state.props.secondPointer,a=2*Math.PI/60*(new Date).getSeconds();this.drawPointer(t,_objectSpread({rad:a},e))}},{key:"drawCenterDot",value:function(t){var e=this.state.props.centerDot,a=e.radius,n=e.fillStyle;t.save(),t.beginPath(),t.fillStyle=n,t.arc(0,0,a,0,2*Math.PI,!1),t.fill(),t.restore()}},{key:"drawPointer",value:function(t,e){var a=e.rad,n=e.lineWidth,i=e.length,r=e.strokeStyle;t.save(),t.beginPath(),t.rotate(a),t.lineWidth=n,t.lineCap="round",t.strokeStyle=r,t.moveTo(0,0),t.lineTo(0,-i),t.stroke(),t.restore()}},{key:"render",value:function(){var t=this.state.canvasId,e=this.state.props,a=e.width,n=e.height;return React.createElement("div",{className:"clock_all",style:{width:a,height:n}},t&&t.map(function(t,e){return React.createElement("canvas",{key:t,ref:t,width:a,height:n,className:"clock_canvas"})}))}}]),a}();Clock.defaultProps={width:450,height:450,radius:150,clockWidth:8,scaleGap:15,numberGap:30,hourPointer:{lineWidth:4,length:70,strokeStyle:"#5d9"},minutePointer:{lineWidth:3,length:90,strokeStyle:"#5d9cec"},secondPointer:{lineWidth:2,length:110,strokeStyle:"#000"},centerDot:{radius:4,fillStyle:"#000"}},exports.Clock=Clock,exports.DashBoard=DashBoard,exports.Line=Line,exports.Radar=Radar;
