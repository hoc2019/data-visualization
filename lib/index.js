"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var React=_interopDefault(require("react"));function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(t){_defineProperty(e,t,a[t])})}return e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _isExist(){for(var t=arguments,e=0;e<t.length;e++){var a=t[e];if(""===a||null==a)return!1}return!0}function _isSetLineDash(t,e){Array.isArray(t)&&2===t.length&&e(t)}function _deepCopy(t){var e=isType(t);return"Array"===e||"Object"===e?cloneObj(t):"Date"===e?t.constructor(t):t}function cloneObj(t){var e=t instanceof Array?[]:{};for(var a in t)e[a]="object"===_typeof(t[a])?cloneObj(t[a]):t[a];return e}function isType(t){return/\[object\s(.*?)\]/.exec(Object.prototype.toString.call(t))[1]}function _getRate(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return _isExist(t,e)&&0<=t&&0<e?t/e:0}function _getMax(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"key",i=[];return t.map(function(t,e){isNaN(t[a])||i.push(t[a])}),0<i.length?Math.max.apply(null,i):0}function _getCtx(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"2d";return _isExist(t)&&this.refs[t]&&this.refs[t].getContext(e)}function DrawCartCoor(){var R=[0,0],j=[100,100];function P(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:R,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:j,a=t[0]!==e[0]&&t[1]===e[1],i=t[0]===e[0]&&t[1]!==e[1];return{drawX:a,drawY:i,flag:a||i}}this._drawCoor=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=t.show,i=t.begin,n=void 0===i?R:i,r=t.end,o=void 0===r?j:r,l=t.strokeStyle,s=void 0===l?"#000":l,d=t.lineWidth,h=void 0===d?2:d,c=t.lineCap,u=void 0===c?"round":c,f=t.setLineDash,p=P(n,o).flag;a&&p&&(e.save(),e.beginPath(),_isSetLineDash(f,function(t){e.setLineDash(t)}),e.moveTo.apply(e,n),e.lineTo.apply(e,o),e.strokeStyle=s,e.lineWidth=h,e.lineCap=u,e.stroke(),e.restore())},this._drawScale=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.begin,i=void 0===a?R:a,n=e.end,r=void 0===n?j:n,o=e.strokeStyle,l=void 0===o?"#000":o,s=e.scaleNum,d=void 0===s?5:s,h=e.scaleLength,c=void 0===h?0:h,u=e.lineWidth,f=void 0===u?2:u,p=e.startIndex,y=void 0===p?0:p,v=e.endIndex,b=void 0===v?d:v,g=P(i,r),_=g.drawX,w=g.drawY;if(g.flag&&0<d){var k,m,S,C,L=(r[0]-i[0])/(d-1),D=(r[1]-i[1])/(d-1);t.save();for(var x=y;x<b;x++)S=(k=i[0]+L*x)+(w?c:0),C=(m=i[1]+D*x)+(_?c:0),t.beginPath(),t.moveTo(k,m),t.lineTo(S,C),t.lineWidth=f,t.strokeStyle=l,t.stroke();t.restore()}},this._drawGrid=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=t.begin,i=void 0===a?R:a,n=t.end,r=void 0===n?j:n,o=t.show,l=t.gridNum,s=void 0===l?5:l,d=t.strokeStyle,h=void 0===d?"#000":d,c=t.lineWidth,u=void 0===c?1:c,f=t.setLineDash,p=void 0===f?[4,4]:f,y=t.gridLength,v=P(i,r),b=v.drawX,g=v.drawY,_=v.flag;if(o&&_&&0<s){var w,k,m,S,C=(r[0]-i[0])/(s-1),L=(r[1]-i[1])/(s-1);e.save();for(var D=1;D<s;D++)m=(w=i[0]+C*D)+(g?y:0),S=(k=i[1]+L*D)+(b?y:0),e.beginPath(),_isSetLineDash(p,function(t){e.setLineDash(t)}),e.moveTo(w,k),e.lineTo(m,S),e.lineWidth=u,e.strokeStyle=h,e.stroke();e.restore()}},this._drawLabel=function(t){var e,a,i,n,r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=o.key,s=(o.label,o.labelNum),d=void 0===s?2:s,h=o.begin,c=void 0===h?R:h,u=o.end,f=void 0===u?j:u,p=o.data,y=void 0===p?[]:p,v=P(c,f),b=v.drawX,g=v.drawY,_=y.length;if(t.save(),b){e=(f[0]-c[0])/(_-1),a=(f[1]-c[1])/(_-1);for(var w=0;w<_;w++)i=c[0]+e*w,n=c[1]+a*w,r=y[w][l],t.textAlign="center",t.textBaseline="top",t.fillText(isNaN(r)?r:Math.round(r),i,n+5)}else if(g){for(var k,m,S=0,C=0;C<l.length;C++)S=Math.max(S,_getMax(y,l[C]));k=S/(d-1),e=(f[0]-c[0])/(d-1),m=(f[1]-c[1])/(d-1);for(var L=r=0;L<d;L++)i=c[0]+e*L,n=c[1]+m*L,t.textAlign="end",t.textBaseline="middle",t.fillText(isNaN(r)?r:Math.round(r),i-5,n),r+=k}else t.restore()},this._drawDataBlock=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=t.rectWidth,i=t.rectHeight,n=t.lineWidth,r=t.setLineDash,o=t.canvasW,l=t.canvasH,s=t.xCoor,d=t.yCoor,h=t.data,c=void 0===h?[]:h,u=t.scale,f=c.length,p=(s.end[0]-s.begin[0])/(f-1);e.save(),e.clearRect(0,0,o,l);for(var y=0;y<c.length;y++){var v=s.begin[0]+p*y;if(Math.abs(u[0]-v)<Math.abs(p)/2){e.save(),e.beginPath(),_isSetLineDash(r,function(t){e.setLineDash(t)}),e.moveTo(v,s.begin[1]),e.lineTo(v,d.end[1]),e.lineWidth=n,e.strokeStyle="#000",e.stroke(),e.restore(),e.beginPath(),e.strokeRect(v+5,(d.end[1]-d.begin[1])/2+d.begin[1],a,i),e.stroke();break}}e.restore()}}function DrawPolarCoor(){this._setCenter=function(t,e){t.translate.apply(t,e)},this._drawCenterDot=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.radius,i=void 0===a?3:a,n=e.fill,r=e.stroke,o=e.fillStyle,l=e.strokeStyle;t.save(),t.beginPath(),t.arc(0,0,i,0,2*Math.PI),n&&(t.fillStyle=o,t.fill()),r&&(t.strokeStyle=l,t.stroke()),t.closePath(),t.restore()},this._drawLabel=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.fillStyle,i=e.textGap,n=e.font,r=e.radius,o=e.label,l=e.rad,s=e.index,d=Math.round(r*Math.sin(l*s)),h=-Math.round(r*Math.cos(l*s));0<d?d+=i:d<0&&(d-=i),0<h?h+=i:h<0&&(h-=i),t.font=n,t.textAlign="center",t.textBaseline="middle",Array.isArray(a)&&0<a.length&&(t.fillStyle=a[s%a.length]),t.fillText(o,d,h)}}var DrawLine=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,DrawCartCoor),_createClass(e,[{key:"_drawLineCoor",value:function(){this._drawCoor.apply(this,arguments)}},{key:"_drawLineScale",value:function(){this._drawScale.apply(this,arguments)}},{key:"_drawLineGrid",value:function(){this._drawGrid.apply(this,arguments)}},{key:"_drawLineLabel",value:function(){this._drawLabel.apply(this,arguments)}},{key:"_drawLineDataBlock",value:function(){this._drawDataBlock.apply(this,arguments)}},{key:"_drawLineData",value:function(r){for(var o,l,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.data,a=void 0===e?[]:e,i=t.key,n=void 0===i?[]:i,s=t.xCoor,d=t.yCoor,h=t.strokeStyle,c=void 0===h?[]:h,u=t.lineWidth,f=void 0===u?3:u,p=t.line,y=void 0===p||p,v=t.dot,b=void 0===v||v,g=t.dotRadius,_=void 0===g?4:g,w=(s.end[0]-s.begin[0])/(a.length-1),k=d.end[1]-d.begin[1],m=0,S=0;S<n.length;S++)m=Math.max(m,_getMax(a,n[S]));y&&n.map(function(i,t){r.beginPath(),a.map(function(t,e){if(0<=t[i]){var a=t[i];o=s.begin[0]+w*e,l=_getRate(a,m)*k+d.begin[1],0===e&&r.moveTo(o,l),0<e&&r.lineTo(o,l)}}),r.strokeStyle=c[t%c.length],r.lineWidth=f,r.stroke()}),b&&n.map(function(i,n){a.map(function(t,e){if(0<=t[i]){var a=t[i];o=s.begin[0]+w*e,l=_getRate(a,m)*k+d.begin[1],r.beginPath(),r.arc(o,l,_,0,2*Math.PI),r.fillStyle=c[n%c.length],r.fill()}})})}}]),e}(),DrawRadar=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,DrawPolarCoor),_createClass(e,[{key:"_getDataDotPos",value:function(t,a){var i,n,e=t.data,r=t.length,o=2*Math.PI/e.length;e.map(function(t,e){i=r*Math.sin(o*e),n=-r*Math.cos(o*e),"function"==typeof a&&a([i,n],t,e)})}},{key:"_setRadarCenter",value:function(){this._setCenter.apply(this,arguments)}},{key:"_drawRadarCenterDot",value:function(){this._drawCenterDot.apply(this,arguments)}},{key:"_drawRadarLabel",value:function(a){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.labelKey,t=n.data,o=2*Math.PI/t.length;a.save(),t.map(function(t,e){i._drawLabel(a,_objectSpread({},n,{label:t[r]||"",rad:o,index:e}))}),a.restore()}},{key:"_drawRadarScale",value:function(i){for(var t,n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.lineWidth,r=e.strokeStyle,o=e.scaleNum,l=e.setLineDash,s=e.data,d=e.radius,h=e.dataKey,c=isNaN(d/o)?20:d/o,u=0,f=0;f<h.length;f++)u=Math.max(u,_getMax(s,h[f]));i.save();for(var p=0;p<o;p++)t=c*(p+1),n=Math.round(u/o*(p+1)),i.beginPath(),this._getDataDotPos({data:s,length:t},function(t,e,a){0===a&&i.moveTo.apply(i,t),0===a&&i.fillText.apply(i,[n].concat(_toConsumableArray(t))),0<a&&i.lineTo.apply(i,t)}),i.lineWidth=a,i.strokeStyle=r,_isSetLineDash(l,function(t){i.setLineDash(t)}),i.closePath(),i.stroke();i.restore()}},{key:"_drawRadarGuide",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=t.show,i=t.setLineDash,n=t.lineWidth,r=t.strokeStyle,o=t.data,l=t.radius;e.save(),e.beginPath(),a&&this._getDataDotPos({data:o,length:l},function(t){e.moveTo(0,0),e.lineTo.apply(e,t),e.lineWidth=n,e.strokeStyle=r,_isSetLineDash(i,function(t){e.setLineDash(t)}),e.stroke()}),e.restore()}},{key:"_drawRadarData",value:function(l){for(var t=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=e.stroke,d=e.fill,h=e.strokeStyle,c=e.fillStyle,u=e.setLineDash,f=e.lineWidth,a=e.dataKey,i=e.data,n=e.radius,p=0,r=0;r<a.length;r++)p=Math.max(p,_getMax(i,a[r]));l.save(),a.map(function(r,o){l.beginPath(),t._getDataDotPos({data:i,length:n},function(t,e,a){var i=_getRate(e[r],p),n=t.map(function(t){return t*i});0===a&&l.moveTo.apply(l,n),0<a&&l.lineTo.apply(l,n),l.lineWidth=f,_isSetLineDash(u,function(t){l.setLineDash(t)}),s&&(l.strokeStyle=h[o%h.length]),d&&(l.fillStyle=c[o%c.length])}),l.closePath(),s&&l.stroke(),d&&l.fill()}),l.restore()}}]),e}();function _drawLine(){return new DrawLine}function _drawRadar(){return new DrawRadar}function styleInject(t,e){void 0===e&&(e={});var a=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===a&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}var css=".radar_all {\n  position: relative;\n}\n.radar_canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  border: 1px solid #000;\n}\n.radar_tooltip {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n}\n.radar_tooltip > div {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  font-size: 14px;\n  cursor: pointer;\n}\n.radar_tooltip > div:not(last-child) {\n  margin-right: 10px;\n}\n";styleInject(css);var obj=_drawRadar(),_setRadarCenter=obj._setRadarCenter.bind(obj),_drawRadarCenterDot=obj._drawRadarCenterDot.bind(obj),_drawRadarScale=obj._drawRadarScale.bind(obj),_drawRadarLabel=obj._drawRadarLabel.bind(obj),_drawRadarGuide=obj._drawRadarGuide.bind(obj),_drawRadarData=obj._drawRadarData.bind(obj),Radar=function(t){function a(t){var e;return _classCallCheck(this,a),(e=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,t))).state={canvasId:["back"],lengthLimit:3,tooltipPro:{},center:[],props:{},formatData:[]},e}return _inherits(a,React.Component),_createClass(a,[{key:"componentDidMount",value:function(){var t=this;this.setState({props:this.props,formatData:_deepCopy(this.props.data)},function(){return t.init()})}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.setState({props:t,formatData:_deepCopy(t.data)},function(){return e.init()})}},{key:"init",value:function(t){var e=this,a=this.state.canvasId,i=this.state.props,n=i.width,r=i.height,o=_getCtx.call(this,a[0]),l=[Math.round(n/2),Math.round(r/2)];this.setState({center:l},function(){e.drawRadar(o,t),e.drawTooltip(o)})}},{key:"drawRadar",value:function(t){var e=this.state,a=e.lengthLimit,i=e.center,n=e.formatData,r=this.state.props,o=r.width,l=r.height,s=r.radius,d=r.centerDot,h=r.scale,c=r.label,u=r.guide,f=r.dataRender;t.clearRect(0,0,o,l),n&&n.length>=a&&(_setRadarCenter(t,i),_drawRadarGuide(t,_objectSpread({},u,{data:n,radius:s})),_drawRadarScale(t,_objectSpread({},h,{data:n,radius:s,dataKey:f.dataKey})),_drawRadarLabel(t,_objectSpread({},c,{data:n,radius:s})),_drawRadarCenterDot(t,_objectSpread({},d)),_drawRadarData(t,_objectSpread({},f,{data:n,radius:s})),_setRadarCenter(t,i=[-i[0],-i[1]]))}},{key:"drawTooltip",value:function(t){var a=this,e=this.state.tooltipPro,i=this.state.props,n=i.width,r=i.tooltip,o=i.dataRender,l=r.position,s=r.childLineHeight,d=r.childLineWidth,h=r.height,c=r.disabledColor,u=o.stroke,f=o.fill,p=o.strokeStyle,y=o.fillStyle,v=o.dataKey,b=o.dataLabel;if(!e.key||0===e.key.length){e.key=[];for(var g=0;g<v.length;g++)e.key.push({show:!0,key:v[g],label:b[g]||v[g]})}var _={width:n,height:h};_[l]=0,e.node=React.createElement("div",{className:"radar_tooltip",style:_},e.key.map(function(t,e){return React.createElement("div",{key:t.key,onClick:function(){return a.changeData(t.key)}},React.createElement("div",{style:{height:s,width:d,marginRight:5,background:t.show&&f?y[e%y.length]:c,border:t.show&&u?"1px solid ".concat(p[e%p.length]):c}}),React.createElement("div",{style:{color:t.show?"#000":c}},t.label))})),this.setState({tooltipPro:e})}},{key:"changeData",value:function(t){for(var e=this,a=this.state,i=a.tooltipPro,n=a.formatData,r=this.state.props.data,o=0;o<n.length;o++)_isExist(n[o][t])?delete n[o][t]:n[o][t]=r[o][t];for(var l=0;l<i.key.length;l++)t===i.key[l].key&&(i.key[l].show=!i.key[l].show);this.setState({formatData:n,tooltipPro:i},function(){return e.init()})}},{key:"render",value:function(){var t=this.state,e=t.canvasId,a=t.tooltipPro,i=this.state.props,n=i.width,r=i.height;return React.createElement("div",{className:"radar_all",style:{width:n,height:r}},e&&e.map(function(t,e){return React.createElement("canvas",{key:t,ref:t,width:n,height:r,className:"radar_canvas"})}),a.node)}}]),a}();Radar.defaultProps={width:450,height:450,radius:150,centerDot:{radius:5,fill:!0,fillStyle:"#5d9",stroke:!1,strokeStyle:"#5d9cec"},scale:{lineWidth:5,strokeStyle:"#5d9",scaleNum:3},guide:{show:!0,setLineDash:[4,4],lineWidth:2,strokeStyle:"#ddd"},label:{labelKey:"label",fillStyle:["red","green","blue"],textGap:20,font:"16px Arial"},dataRender:{stroke:!0,strokeStyle:["#5d9","#5d9cec","#ff0000"],fill:!0,fillStyle:["rgba(85,221,153,.5)","rgba(93,156,236,.5)","rgba(255,0,0,.5)"],lineWidth:2,dataKey:["A","B","C"],dataLabel:["stuA","stuB","stuC"]},tooltip:{position:"bottom",childLineHeight:5,childLineWidth:40,height:60,disabledColor:"#ddd"},data:[{label:"语文",A:120,B:90,C:130},{label:"数学",A:140,B:150,C:130},{label:"英语",A:130,B:90,C:130},{label:"历史",A:90,B:80,C:100},{label:"政治",A:95,B:60,C:100},{label:"地理",A:80,B:75,C:100},{label:"历史",A:90,B:80,C:100},{label:"政治",A:95,B:60,C:100},{label:"地理",A:80,B:75,C:100}]};var css$1=".line_all {\n  position: relative;\n}\n.line_canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  border: 1px solid #000;\n}\n.line_title,\n.line_tooltip {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n}\n.line_title > div,\n.line_tooltip > div {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: nowrap;\n  font-size: 14px;\n  cursor: pointer;\n}\n.line_title > div:not(last-child),\n.line_tooltip > div:not(last-child) {\n  margin-right: 10px;\n}\n";styleInject(css$1);var obj$1=_drawLine(),_drawLineCoor=obj$1._drawLineCoor.bind(obj$1),_drawLineScale=obj$1._drawLineScale.bind(obj$1),_drawLineGrid=obj$1._drawLineGrid.bind(obj$1),_drawLineLabel=obj$1._drawLineLabel.bind(obj$1),_drawLineData=obj$1._drawLineData.bind(obj$1),_drawLineDataBlock=obj$1._drawLineDataBlock.bind(obj$1),Line=function(t){function a(t){var e;return _classCallCheck(this,a),(e=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,t))).state={canvasId:["back","data"],titleDOM:void 0,tooltipPro:{},xCoor:{},yCoor:{},props:{},formatData:[]},e.drawBlock=e.drawBlock.bind(_assertThisInitialized(e)),e}return _inherits(a,React.Component),_createClass(a,[{key:"getPosition",value:function(){var t=this.state.props.innerGap;return{top:t[0],right:t[1],bottom:t[2],left:t[3]}}},{key:"componentDidMount",value:function(){var t=this;this.setState({props:this.props,formatData:_deepCopy(this.props.data)},function(){return t.init()})}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.setState({props:t,formatData:_deepCopy(t.data)},function(){return e.init()})}},{key:"init",value:function(){var t=this,e=this.state.canvasId,a=this.state.props,i=a.width,n=a.height,r=this.getPosition(),o=r.top,l=r.right,s=r.bottom,d=r.left,h=_getCtx.call(this,e[0]),c=_getCtx.call(this,e[1]);this.setState({xCoor:{begin:[d,n-s],end:[i-l,n-s]},yCoor:{begin:[d,n-s],end:[d,o]}},function(){t.drawBack(h),t.drawData(c),t.drawTitle(),t.drawTooltip()})}},{key:"drawBack",value:function(t){var e=this.state,a=e.xCoor,i=e.yCoor,n=e.formatData,r=this.state.props,o=r.width,l=r.height,s=r.axisX,d=r.axisY,h=r.scaleX,c=r.scaleY,u=r.gridX,f=r.gridY,p=r.labelX,y=r.labelY;r.dataLine;t.clearRect(0,0,o,l),_drawLineCoor(t,_objectSpread({},s,a)),_drawLineCoor(t,_objectSpread({},d,i)),_drawLineScale(t,_objectSpread({},s,a,h,{scaleNum:n.length})),_drawLineScale(t,_objectSpread({},d,i,c)),_drawLineGrid(t,_objectSpread({},s,a,u,{gridNum:n.length,gridLength:i.end[1]-i.begin[1]})),_drawLineGrid(t,_objectSpread({},d,i,f,{gridLength:a.end[0]-a.begin[0]})),_drawLineLabel(t,_objectSpread({},p,a,{data:n})),_drawLineLabel(t,_objectSpread({},y,i,{data:n}))}},{key:"drawData",value:function(t){var e=this.state,a=e.xCoor,i=e.yCoor,n=e.formatData,r=this.state.props,o=r.width,l=r.height,s=r.labelY,d=r.dataLine;r.data;t.clearRect(0,0,o,l),_drawLineData(t,_objectSpread({key:s.key,data:n,xCoor:a,yCoor:i},d))}},{key:"drawBlock",value:function(t){var e=this.getPosition(),a=e.top,i=e.right,n=e.bottom,r=e.left,o=this.state.props,l=o.width,s=o.height,d=o.dataBlock,h=this.state,c=h.canvasId,u=h.xCoor,f=h.yCoor,p=h.formatData,y=_getCtx.call(this,c[2]);t.offsetX>=r&&t.offsetX<=l-i&&t.offsetY>=a&&t.offsetY<=s-n?_drawLineDataBlock(y,_objectSpread({},d,{canvasW:l,canvasH:s,xCoor:u,yCoor:f,data:p,scale:[t.offsetX,t.offsetY]})):y.clearRect(0,0,l,s)}},{key:"drawTitle",value:function(){var t=this.state.props,e=t.width,a=t.title,i=a.position,n=a.label,r=a.style,o=void 0===r?{}:r;(o=_objectSpread({},o,{width:e}))[i]=0;var l=React.createElement("div",{className:"line_title",style:o},n);this.setState({titleDOM:l})}},{key:"drawTooltip",value:function(){var a=this,t=this.state.tooltipPro,e=this.state.props,i=e.width,n=e.tooltip,r=e.labelY,o=e.dataLine,l=n.position,s=n.childLineHeight,d=n.childLineWidth,h=n.height,c=n.disabledColor,u=r.key,f=r.label;if(!t.key||0===t.key.length){t.key=[];for(var p=0;p<u.length;p++)t.key.push({key:u[p],show:!0,label:f[p]||u[p]})}var y={width:i,height:h};y[l]=0,t.node=React.createElement("div",{className:"line_tooltip",style:y},t.key.map(function(t,e){return React.createElement("div",{key:t.key,onClick:function(){return a.changeData(t.key)}},React.createElement("div",{style:{height:s,width:d,marginRight:5,background:t.show?o.strokeStyle[e%o.strokeStyle.length]:c}}),React.createElement("div",{style:{color:t.show?"#000":c}},t.label))})),this.setState({tooltipPro:t})}},{key:"changeData",value:function(t){for(var e=this,a=this.state,i=a.tooltipPro,n=a.formatData,r=this.state.props.data,o=0;o<n.length;o++)_isExist(n[o][t])?delete n[o][t]:n[o][t]=r[o][t];for(var l=0;l<i.key.length;l++)t===i.key[l].key&&(i.key[l].show=!i.key[l].show);this.setState({formatData:n,tooltipPro:i},function(){return e.init()})}},{key:"render",value:function(){var t=this.state,e=t.canvasId,a=t.titleDOM,i=t.tooltipPro,n=(t.mouseEvent,this.state.props),r=n.width,o=n.height;n.coordinate;return React.createElement("div",{className:"line_all",style:{width:r,height:o}},e&&e.map(function(t,e){return React.createElement("canvas",{key:t,ref:t,width:r,height:o,className:"line_canvas"})}),a,i.node)}}]),a}();Line.defaultProps={width:1e3,height:500,innerGap:[60,40,70,40],axisX:{show:!0,strokeStyle:"#5d9cec",lineWidth:2,setLineDash:[]},axisY:{show:!0,strokeStyle:"#5d9cec",lineWidth:2,setLineDash:[]},scaleX:{scaleLength:0,strokeStyle:"#5d9",lineWidth:2},scaleY:{scaleNum:0,scaleLength:10,lineWidth:2},gridX:{show:!0,strokeStyle:"#000",lineWidth:1,setLineDash:[4,4]},gridY:{show:!0,gridNum:5,strokeStyle:"#000",lineWidth:1,setLineDash:[4,4]},labelX:{key:"x",label:"日期"},labelY:{key:["weight","IQ","EQ"],label:["体重","智商","情商"],labelNum:5},dataLine:{strokeStyle:["red","green","blue"],lineWidth:3,line:!0,dot:!0,dotRadius:4},tooltip:{position:"bottom",childLineHeight:5,childLineWidth:40,height:60,disabledColor:"#ddd"},title:{position:"top",label:"人体状况图（α测试）",style:{fontSize:20,color:"#000",height:60}},dataBlock:{rectWidth:100,rectHeight:100,lineWidth:1,setLineDash:[4,4]},data:[{x:"2012-12-12",weight:200,IQ:300,EQ:138},{x:"2012-12-13",weight:100,IQ:200,EQ:500},{x:"2012-12-14",weight:200,IQ:100,EQ:172},{x:"2012-12-15",weight:150,IQ:0,EQ:146},{x:"2012-12-16",weight:200,IQ:100,EQ:250},{x:"2012-12-17",weight:100,IQ:200,EQ:125},{x:"2012-12-18",weight:200,IQ:300,EQ:250}]},exports.Line=Line,exports.Radar=Radar;
